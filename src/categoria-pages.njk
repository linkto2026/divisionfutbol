---
layout: layouts/base.njk
pagination:
  data: categories
  size: 1
  alias: cat
---

{% set pageSize = 10 %}
{% set items = collections.posts | filterby("data.category", cat.name) %}
{% set totalPages = (items.length / pageSize) | round(0, "ceil") %}

{# Generamos páginas 2..N #}
{% for p in range(2, totalPages + 1) %}
  --- 
  permalink: "categoria/{{ cat.slug }}/page/{{ p }}/index.html"
  ---
  <h1>{{ cat.name }}</h1>

  <ul>
    {% set start = (p - 1) * pageSize %}
    {% set end = start + pageSize %}
    {% for post in items | slice(start, end) %}
      <li style="margin-bottom:14px;">
        <a href="{{ post.url | url }}" style="font-weight:700;">
          {{ post.data.title }}
        </a>
        <div style="font-size:14px;color:#555;">
          {{ post.data.date | date }}
        </div>
      </li>
    {% endfor %}
  </ul>

  <hr style="margin:16px 0;">
  <nav style="display:flex;justify-content:space-between;gap:12px;">
    <div>
      {% if p == 2 %}
        <a href="{{ ('/categoria/' ~ cat.slug ~ '/') | url }}">← Anterior</a>
      {% else %}
        <a href="{{ ('/categoria/' ~ cat.slug ~ '/page/' ~ (p - 1) ~ '/') | url }}">← Anterior</a>
      {% endif %}
    </div>

    <div style="color:#555;">Página {{ p }} de {{ totalPages }}</div>

    <div style="text-align:right;">
      {% if p < totalPages %}
        <a href="{{ ('/categoria/' ~ cat.slug ~ '/page/' ~ (p + 1) ~ '/') | url }}">Siguiente →</a>
      {% endif %}
    </div>
  </nav>

{% endfor %}
